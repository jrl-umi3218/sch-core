<!-- Modified version of HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>sch-core: example2.cpp</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('a00006.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">example2.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<p>This example shows the normal use of the SCH library: More Complex Objects</p>
<div class="fragment"><div class="line"><span class="comment">/*</span></div><div class="line"><span class="comment"> * \file      example1.cpp</span></div><div class="line"><span class="comment"> * \author    Mehdi Benallegue</span></div><div class="line"><span class="comment"> * \date      2014</span></div><div class="line"><span class="comment"> * \brief     This file shows the normal use of the SCH library:</span></div><div class="line"><span class="comment"> *              More complex objects</span></div><div class="line"><span class="comment"> *</span></div><div class="line"><span class="comment"> *            sch-core is an Efficient implementation of GJK algorithm for</span></div><div class="line"><span class="comment"> *            proximity queries (collision detection, distance computations,</span></div><div class="line"><span class="comment"> *            penetration depths and withness points) between convex shapes.</span></div><div class="line"><span class="comment"> *            The library can be extended to any convex shape for which we</span></div><div class="line"><span class="comment"> *            can compute the support function, but it already supports</span></div><div class="line"><span class="comment"> *            polyhedrons, boxes, spheres and ellipsoids, and it is</span></div><div class="line"><span class="comment"> *            particularly optimized for strictly convex hulls (SCH/STP-BV).</span></div><div class="line"><span class="comment"> *</span></div><div class="line"><span class="comment"> *</span></div><div class="line"><span class="comment"> */</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &lt;string&gt;</span></div><div class="line"><span class="preprocessor">#include &quot;example_common.h&quot;</span></div><div class="line"></div><div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;math.h&gt;</span></div><div class="line"></div><div class="line"><span class="comment">/*******************</span></div><div class="line"><span class="comment"> *More complex objects</span></div><div class="line"><span class="comment"> */</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">//******************</span></div><div class="line"><span class="comment">//Includes for complex objects</span></div><div class="line"></div><div class="line"><span class="comment">//Include file for convex polyhedrons</span></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="a00091.html">sch/S_Polyhedron/S_Polyhedron.h</a>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">//Include file for STP-BVs (strictly convex hulls)</span></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="a00104.html">sch/STP-BV/STP_BV.h</a>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">//Include file for STP-BV with underlying polyhedron</span></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="a00105.html">sch/STP-BV/STP_BV_P.h</a>&gt;</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">//*********************</span></div><div class="line"><span class="comment">//Includes for proximity queries</span></div><div class="line"></div><div class="line"><span class="comment">//Include file for scene management</span></div><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="a00072.html">sch/CD/CD_Scene.h</a>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">//Inlude file for the verification of the result</span></div><div class="line"><span class="preprocessor">#include &quot;example.hxx&quot;</span></div><div class="line"></div><div class="line"><span class="keyword">using namespace </span><a class="code" href="a00116.html">sch</a>;</div><div class="line"></div><div class="line"><span class="keywordtype">bool</span> verifyResult(<span class="keyword">const</span> std::string &amp; objI, <span class="keyword">const</span> std::string &amp; objJ,</div><div class="line">                  <span class="keywordtype">double</span> distance,</div><div class="line">                  <span class="keyword">const</span> <a name="_a0"></a><a class="code" href="a00068.html">Point3</a> &amp; p1, <span class="keyword">const</span> <a class="code" href="a00068.html">Point3</a> &amp; p2);</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> display (<span class="keywordtype">void</span>);</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> Example::initializeUniverse()</div><div class="line">{</div><div class="line">  <span class="comment">//Scene (see example1.exe)</span></div><div class="line"></div><div class="line">  <span class="comment">//**********</span></div><div class="line">  <span class="comment">//Polyhedrons</span></div><div class="line"></div><div class="line">  <span class="comment">//Create a polyhedron.</span></div><div class="line">  <a name="_a1"></a><a class="code" href="a00039.html">S_Polyhedron</a> * poly = <span class="keyword">new</span> <a class="code" href="a00039.html">S_Polyhedron</a> ();</div><div class="line"></div><div class="line">  <span class="comment">//At creationm the polyhedron is empty, it has to be loaded from a file.</span></div><div class="line">  poly-&gt;<a name="a2"></a><a class="code" href="a00039.html#a62e27360640d760e615ef63b369ee022">constructFromFile</a>(<span class="stringliteral">&quot;sample_polyhedron.otp&quot;</span>);</div><div class="line"></div><div class="line">  <span class="comment">//The file must have been generated with sch-creator, for details see</span></div><div class="line">  <span class="comment">//https://github.com/jrl-umi3218/sch-creator</span></div><div class="line"></div><div class="line">  <span class="comment">//An elternative solution is to use qconvex software from Qhull using the</span></div><div class="line">  <span class="comment">//following instruction:</span></div><div class="line">  <span class="comment">//&quot;qconvex.exe TI &lt;input_filename&gt; TO &lt;output_filename&gt; Qt o f&quot;</span></div><div class="line">  <span class="comment">//see http://www.qhull.org/html/qconvex.htm for details on using qconvex.</span></div><div class="line"></div><div class="line">  <span class="comment">//Position/Orientation</span></div><div class="line">  poly-&gt;<a name="a3"></a><a class="code" href="a00033.html#a6f7bcd04e054bad613ac08ac3fa7cb20">setPosition</a>(0.1,0.7,0.9);</div><div class="line">  poly-&gt;<a name="a4"></a><a class="code" href="a00033.html#a13ee6e3dac6c66a93e408301d4bbff8d">setOrientation</a>(0.1,1,-0.7);</div><div class="line"></div><div class="line">  <span class="comment">//Add to scene</span></div><div class="line">  sObj.addObject(poly);</div><div class="line">  objName.push_back(<span class="stringliteral">&quot;poly&quot;</span>);</div><div class="line"></div><div class="line">  <span class="comment">//*********</span></div><div class="line">  <span class="comment">//Strictly Convex Hull (STP-BV)</span></div><div class="line">  <span class="comment">//(see README.md for details)</span></div><div class="line"></div><div class="line">  <span class="comment">//Create a STP_BVs</span></div><div class="line">  <a name="_a5"></a><a class="code" href="a00062.html">STP_BV</a>* stp1 = <span class="keyword">new</span> <a class="code" href="a00062.html">STP_BV</a>();</div><div class="line">  <a class="code" href="a00062.html">STP_BV</a>* stp2 = <span class="keyword">new</span> <a class="code" href="a00062.html">STP_BV</a>();</div><div class="line"></div><div class="line">  <span class="comment">//Similarly to polyhedrons, it has to be loaded from file</span></div><div class="line">  stp1-&gt;<a name="a6"></a><a class="code" href="a00062.html#a82a1a26e0729a3647a794747751d9d51">constructFromFile</a>(<span class="stringliteral">&quot;sample_stpbv1.txt&quot;</span>);</div><div class="line">  stp2-&gt;<a class="code" href="a00062.html#a82a1a26e0729a3647a794747751d9d51">constructFromFile</a>(<span class="stringliteral">&quot;sample_stpbv2.txt&quot;</span>);</div><div class="line"></div><div class="line"></div><div class="line">  <span class="comment">//Position/Orientation</span></div><div class="line">  stp1-&gt;<a class="code" href="a00033.html#a6f7bcd04e054bad613ac08ac3fa7cb20">setPosition</a>(0.15,0.6,0.8);</div><div class="line">  stp1-&gt;<a class="code" href="a00033.html#a13ee6e3dac6c66a93e408301d4bbff8d">setOrientation</a>(0.4,-1.1,1.2);</div><div class="line"></div><div class="line">  <span class="comment">//Position/Orientation</span></div><div class="line">  stp2-&gt;<a class="code" href="a00033.html#a6f7bcd04e054bad613ac08ac3fa7cb20">setPosition</a>(0.4,0.0,0.1);</div><div class="line">  stp2-&gt;<a class="code" href="a00033.html#a13ee6e3dac6c66a93e408301d4bbff8d">setOrientation</a>(0.7,-0.2,-1.1);</div><div class="line"></div><div class="line">  <span class="comment">//Add to scene</span></div><div class="line">  sObj.addObject(stp1);</div><div class="line">  sObj.addObject(stp2);</div><div class="line">  objName.push_back(<span class="stringliteral">&quot;stp1&quot;</span>);</div><div class="line">  objName.push_back(<span class="stringliteral">&quot;stp2&quot;</span>);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">bool</span> Example::unittest()</div><div class="line">{</div><div class="line">  <span class="comment">//Scene proximity query (see example1.cpp)</span></div><div class="line">  <span class="keywordtype">int</span> collisionNbr = sObj.sceneProximityQuery();</div><div class="line"></div><div class="line">  std::cout&lt;&lt;<span class="stringliteral">&quot;Complex objects&quot;</span> &lt;&lt; std::endl;</div><div class="line">  std::cout&lt;&lt;<span class="stringliteral">&quot;Number of objects: &quot;</span> &lt;&lt; sObj.size() &lt;&lt; std::endl;</div><div class="line">  std::cout&lt;&lt;<span class="stringliteral">&quot;Number of pairs: &quot;</span> &lt;&lt; sObj.size()*(sObj.size()-1)/2&lt;&lt; std::endl;</div><div class="line"></div><div class="line">  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i=0; i&lt;sObj.size(); ++i)</div><div class="line">  {</div><div class="line">    <span class="comment">//We can also get back our object pointers</span></div><div class="line">    <a name="_a7"></a><a class="code" href="a00033.html">S_Object</a> * ptr = sObj[i];</div><div class="line">    std::cout &lt;&lt;<span class="stringliteral">&quot;Object &quot;</span>&lt;&lt;i&lt;&lt;<span class="stringliteral">&quot; type:&quot;</span>&lt;&lt; ptr-&gt;<a name="a8"></a><a class="code" href="a00033.html#ace2fb1bfa764c93806c1becaeed7027d">getType</a>() &lt;&lt; std::endl;</div><div class="line">  }</div><div class="line"></div><div class="line">  std::cout&lt;&lt; std::endl&lt;&lt;<span class="stringliteral">&quot;Number of collisions: &quot;</span>&lt;&lt; collisionNbr &lt;&lt; std::endl;</div><div class="line"></div><div class="line">  <span class="keywordtype">bool</span> comparison = <span class="keyword">true</span>;</div><div class="line">  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> i=0; i&lt;sObj.size(); ++i)</div><div class="line">  {</div><div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> j=0; j&lt;i; ++j)</div><div class="line">    {</div><div class="line">      std::cout &lt;&lt; <span class="stringliteral">&quot;The pair &quot;</span> &lt;&lt; j &lt;&lt;<span class="stringliteral">&quot; - &quot;</span>&lt;&lt; i &lt;&lt;std::endl;</div><div class="line"></div><div class="line">      <a class="code" href="a00068.html">Point3</a> p1,p2;</div><div class="line"></div><div class="line">      <span class="keywordtype">double</span> distance = sObj.getWitnessPoints(i,j,p1,p2);</div><div class="line"></div><div class="line"></div><div class="line">      std::cout &lt;&lt; <span class="stringliteral">&quot;Distance &quot;</span> &lt;&lt; distance &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; i &lt;&lt;std::endl;</div><div class="line">      std::cout &lt;&lt;<span class="stringliteral">&quot;Witness points: &quot;</span>  &lt;&lt; std::endl;</div><div class="line">      std::cout &lt;&lt;<span class="stringliteral">&quot;  P1: &quot;</span>&lt;&lt; p1 &lt;&lt; std::endl;</div><div class="line">      std::cout &lt;&lt;<span class="stringliteral">&quot;  P2: &quot;</span>&lt;&lt; p2 &lt;&lt; std::endl;</div><div class="line">      <span class="comment">// check the results</span></div><div class="line">      <span class="keywordflow">if</span>(!verifyResult(objName[i], objName[j], distance, p1, p2))</div><div class="line">        comparison = <span class="keyword">false</span>;</div><div class="line">      std::cout &lt;&lt; std::endl;</div><div class="line">    }</div><div class="line">  }</div><div class="line"></div><div class="line">  <span class="keywordflow">return</span> comparison;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="keywordtype">void</span> Example::displayScene()</div><div class="line">{</div><div class="line">  sObj.sceneProximityQuery();</div><div class="line">  display();</div><div class="line">}</div><div class="line"></div><div class="line"></div><div class="line"><span class="keywordtype">bool</span> verifyResult(<span class="keyword">const</span> std::string &amp; objI, <span class="keyword">const</span> std::string &amp; objJ,</div><div class="line">                  <span class="keywordtype">double</span> distance,</div><div class="line">                  <span class="keyword">const</span> <a class="code" href="a00068.html">Point3</a> &amp; p1, <span class="keyword">const</span> <a class="code" href="a00068.html">Point3</a> &amp; p2)</div><div class="line">{</div><div class="line">  <span class="keywordtype">double</span> dd(0);</div><div class="line">  <a class="code" href="a00068.html">Point3</a> dp1(0, 0, 0);</div><div class="line">  <a class="code" href="a00068.html">Point3</a> dp2(0, 0, 0);</div><div class="line"></div><div class="line">  <span class="keywordflow">if</span>(objJ== <span class="stringliteral">&quot;poly&quot;</span> &amp;&amp; objI == <span class="stringliteral">&quot;stp1&quot;</span>)</div><div class="line">  {</div><div class="line"><span class="preprocessor">#ifdef SCH_BUILD_BSD</span></div><div class="line">    dd = 0.;</div><div class="line">    dp1.Set(0, 0, 0);</div><div class="line">    dp2.Set(0, 0, 0);</div><div class="line"><span class="preprocessor">#else</span></div><div class="line">    dd = -0.003622207057881;</div><div class="line">    dp1.Set( 0.157367547718, 0.68942718023, 0.891961713557);</div><div class="line">    dp2.Set(0.0986621048016, 0.691217002621, 0.905102283015);</div><div class="line"><span class="preprocessor">#endif</span></div><div class="line">  }</div><div class="line">  <span class="keywordflow">else</span> <span class="keywordflow">if</span>(objJ == <span class="stringliteral">&quot;poly&quot;</span> &amp;&amp; objI == <span class="stringliteral">&quot;stp2&quot;</span>)</div><div class="line">  {</div><div class="line">    dd = 1.052877530262;</div><div class="line">    dp1.Set(0.113009188603, 0.657740931859, 0.866412634224);</div><div class="line">    dp2.Set(0.404379849329, 0.0191152898235, 0.117988985704);</div><div class="line">  }</div><div class="line">  <span class="keywordflow">else</span> <span class="keywordflow">if</span>(objJ == <span class="stringliteral">&quot;stp1&quot;</span> &amp;&amp; objI == <span class="stringliteral">&quot;stp2&quot;</span>)</div><div class="line">  {</div><div class="line">    dd = 0.7165631886362;</div><div class="line">    dp1.Set(0.167062414197, 0.581943658784, 0.704052592159);</div><div class="line">    dp2.Set(0.404383200422, 0.0191578029975, 0.117951821311);</div><div class="line">  }</div><div class="line"></div><div class="line">  <span class="keywordtype">bool</span> res = <span class="keyword">true</span>;</div><div class="line">  res = compare(distance, dd, <span class="stringliteral">&quot;distance (&quot;</span>+objI +<span class="stringliteral">&quot;, &quot;</span>+objJ+<span class="stringliteral">&quot;): &quot;</span>) &amp;&amp; res;</div><div class="line">  res = compare(p1, dp1, <span class="stringliteral">&quot;p1 (&quot;</span>+objI +<span class="stringliteral">&quot;, &quot;</span>+objJ+<span class="stringliteral">&quot;): &quot;</span>) &amp;&amp; res;</div><div class="line">  res = compare(p2, dp2, <span class="stringliteral">&quot;p2 (&quot;</span>+objI +<span class="stringliteral">&quot;, &quot;</span>+objJ+<span class="stringliteral">&quot;): &quot;</span>) &amp;&amp; res;</div><div class="line">  <span class="keywordflow">return</span> res;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">/* Standard output of this example:</span></div><div class="line"><span class="comment"></span></div><div class="line"><span class="comment">Complex objects</span></div><div class="line"><span class="comment">Number of objects: 3</span></div><div class="line"><span class="comment">Number of pairs: 3</span></div><div class="line"><span class="comment">Object 0 type:1</span></div><div class="line"><span class="comment">Object 1 type:2</span></div><div class="line"><span class="comment">Object 2 type:2</span></div><div class="line"><span class="comment"></span></div><div class="line"><span class="comment">Number of collisions: 1</span></div><div class="line"><span class="comment">The pair 0 - 1</span></div><div class="line"><span class="comment">Distance -0.003622211</span></div><div class="line"><span class="comment">Witness points:</span></div><div class="line"><span class="comment">  P1: 0.157368 0.689427 0.891962</span></div><div class="line"><span class="comment">  P2: 0.0986621 0.691217 0.905102</span></div><div class="line"><span class="comment"></span></div><div class="line"><span class="comment">The pair 0 - 2</span></div><div class="line"><span class="comment">Distance 1.052882</span></div><div class="line"><span class="comment">Witness points:</span></div><div class="line"><span class="comment">  P1: 0.113009 0.657741 0.866413</span></div><div class="line"><span class="comment">  P2: 0.40438 0.0191153 0.117989</span></div><div class="line"><span class="comment"></span></div><div class="line"><span class="comment">The pair 1 - 2</span></div><div class="line"><span class="comment">Distance 0.7165632</span></div><div class="line"><span class="comment">Witness points:</span></div><div class="line"><span class="comment">  P1: 0.167062 0.581944 0.704053</span></div><div class="line"><span class="comment">  P2: 0.404383 0.0191578 0.117952</span></div><div class="line"><span class="comment"></span></div><div class="line"><span class="comment">*/</span></div></div><!-- fragment --> </div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.6-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Thu Nov 7 2019 08:21:44 for sch-core by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
